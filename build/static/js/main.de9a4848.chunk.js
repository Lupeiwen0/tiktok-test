(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{19:function(e,t,n){e.exports=n(45)},45:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),u=n.n(c),s=n(2),i=n.n(s),o=n(4),l=n(3),p=n(16),m=n.n(p),f=n(17),d=n.n(f),k=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("https://dy-speed-test.yiye.ai/api/v1/qyh/jsticket");case 2:return t=e.sent,n=t.data,r=n.data||{},a=r.ticket,r.client_key,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){var t=e.ticket,n=e.nonce_str,r=e.timestamp,a=e.url,c="jsapi_ticket=".concat(t,"&nonce_str=").concat(n,"&timestamp=").concat(r,"&url=").concat(a);return d()(c)},y=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,c,u,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.timestamp,r=t.nonce_str,a=t.url,e.next=3,k();case 3:return c=e.sent,u=c.client_key,s=c.ticket,e.next=8,b({ticket:s,timestamp:n,nonce_str:r,url:a});case 8:return o=e.sent,e.abrupt("return",{client_key:u,signature:o});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=window.location,O=j.href,_=String(parseInt(Date.now()/1e3)),h=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],m=s[1],f=Object(r.useState)(""),d=Object(l.a)(f,2),k=d[0],b=d[1],h=Object(r.useState)(""),w=Object(l.a)(h,2),g=w[0],v=w[1],E=Object(r.useState)(""),S=Object(l.a)(E,2),x=S[0],W=S[1],C=Object(r.useCallback)(Object(o.a)(i.a.mark((function e(){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({timestamp:_,nonce_str:"Wm3WZYTPz0wzccnW",url:O});case 2:t=e.sent,r=t.client_key,a=t.signature,n.config({params:{client_key:r,signature:a,timestamp:_,nonce_str:"Wm3WZYTPz0wzccnW",url:O}}),W(r);case 7:case"end":return e.stop()}}),e)}))),[n]);return Object(r.useEffect)((function(){c(window.douyin_open),n&&(b("SDK Loaded"),C(),n.ready((function(){m(!0),b("SDK Config Ready")})),n.error((function(e){b("SDK Config Error: ".concat(JSON.stringify(e)))})))}),[n,C]),a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{onClick:function(){return j.reload()},className:"link"},"Reload"),a.a.createElement("p",null,k," "),p?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{onClick:function(){p&&n.jumpOpenAuth({params:{client_key:x,redirect_uri:j.href,state:"",scope:"user_info",response_type:"code"},success:function(e){var t=e.ticket;return v("Auth Success: ".concat(t))},error:function(e){return v("Auth Error: ".concat(JSON.stringify(e)))}})},className:"link"},"Auth"),""):a.a.createElement("p",null,"Loading..."),a.a.createElement("p",null,g))},w=n(18);new(n.n(w).a),u.a.render(a.a.createElement(h,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.de9a4848.chunk.js.map